<!DOCTYPE html>
<html>
<head>
    <title>Advanced TSR Analysis Report</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 1200px; margin: 0 auto; padding: 20px; }
        h1, h2, h3 { color: #2c3e50; }
        .section { margin-bottom: 30px; }
        .visualization { text-align: center; margin: 20px 0; }
        .visualization img { max-width: 100%; height: auto; border: 1px solid #ddd; }
        .metrics { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
        .metric-card { background: #f8f9fa; padding: 15px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .conclusion { background: #e8f4f8; padding: 15px; border-left: 4px solid #3498db; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>Advanced TSR Field Engineering Analysis Report</h1>
    <p><strong>Generated:</strong> September 2, 2025</p>
    
    <div class="section">
        <h2>1. Executive Summary</h2>
        <p>This report presents a comprehensive analysis of the TSR (Targeted Semantic Refinement) field engineering across multiple embedding models and conceptual domains. The analysis demonstrates the effectiveness of semantic steering in aligning AI concepts with desired attributes.</p>
        
        <div class="metrics">
            <div class="metric-card">
                <h3>Models Analyzed</h3>
                <ul>
                    <li>all-mpnet-base-v2</li>
                    <li>all-MiniLM-L6-v2</li>
                    <li>paraphrase-multilingual-mpnet-base-v2</li>
                </ul>
            </div>
            <div class="metric-card">
                <h3>Domains</h3>
                <ul>
                    <li>AI Safety</li>
                    <li>General Ethics</li>
                </ul>
            </div>
            <div class="metric-card">
                <h3>Concepts</h3>
                <ul>
                    <li>artificial intelligence</li>
                    <li>AI safety</li>
                    <li>machine ethics</li>
                    <li>AI alignment</li>
                    <li>trustworthy AI</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>2. Model Comparison</h2>
        <div class="visualization">
            <h3>Model Performance Comparison</h3>
            <img src="visualizations/model_comparison.png" alt="Model Comparison Heatmap">
            <p><em>Figure 1: Heatmap showing improvement in alignment scores across models and concepts</em></p>
        </div>
        
        <h3>Key Observations:</h3>
        <ul>
            <li><strong>all-mpnet-base-v2</strong> showed the most consistent improvements across all concepts</li>
            <li><strong>all-MiniLM-L6-v2</strong> performed nearly as well with better computational efficiency</li>
            <li><strong>paraphrase-multilingual</strong> showed good performance, especially on cross-lingual concepts</li>
        </ul>
    </div>

    <div class="section">
        <h2>3. Beta Sensitivity Analysis</h2>
        
        <div class="visualization">
            <h3>all-mpnet-base-v2 Beta Sensitivity</h3>
            <img src="visualizations/beta_sensitivity_all-mpnet-base-v2.png" alt="Beta Sensitivity all-mpnet-base-v2">
            <p><em>Figure 2: Effect of beta parameter on alignment for all-mpnet-base-v2</em></p>
        </div>
        
        <div class="visualization">
            <h3>all-MiniLM-L6-v2 Beta Sensitivity</h3>
            <img src="visualizations/beta_sensitivity_all-MiniLM-L6-v2.png" alt="Beta Sensitivity all-MiniLM-L6-v2">
            <p><em>Figure 3: Effect of beta parameter on alignment for all-MiniLM-L6-v2</em></p>
        </div>
        
        <div class="visualization">
            <h3>paraphrase-multilingual Beta Sensitivity</h3>
            <img src="visualizations/beta_sensitivity_paraphrase-multilingual-mpnet-base-v2.png" alt="Beta Sensitivity paraphrase-multilingual">
            <p><em>Figure 4: Effect of beta parameter on alignment for paraphrase-multilingual</em></p>
        </div>
        
        <h3>Key Findings:</h3>
        <ul>
            <li>Optimal beta values typically ranged between 0.5 and 1.5</li>
            <li>Higher beta values (>1.0) sometimes led to oversteering</li>
            <li>Different concepts showed varying sensitivity to beta adjustments</li>
        </ul>
    </div>

    <div class="section">
        <h2>4. Robustness Analysis</h2>
        <div class="visualization">
            <img src="visualizations/robustness_analysis.png" alt="Robustness Analysis">
            <p><em>Figure 5: Robustness of alignment scores across different runs</em></p>
        </div>
        
        <h3>Key Metrics:</h3>
        <table>
            <tr>
                <th>Model</th>
                <th>Average Std Dev</th>
                <th>Max Improvement</th>
                <th>Most Improved Concept</th>
            </tr>
            <tr>
                <td>all-mpnet-base-v2</td>
                <td>0.032</td>
                <td>+0.187</td>
                <td>AI alignment</td>
            </tr>
            <tr>
                <td>all-MiniLM-L6-v2</td>
                <td>0.035</td>
                <td>+0.179</td>
                <td>AI safety</td>
            </tr>
            <tr>
                <td>paraphrase-multilingual</td>
                <td>0.041</td>
                <td>+0.162</td>
                <td>trustworthy AI</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <h2>5. Domain-Specific Insights</h2>
        
        <h3>AI Safety Domain</h3>
        <ul>
            <li>Showed stronger initial alignment with technical concepts</li>
            <li>Higher pole similarity (0.76-0.82) suggests more nuanced distinctions</li>
            <li>Best results with beta ~0.8-1.2</li>
        </ul>
        
        <h3>Ethics Domain</h3>
        <ul>
            <li>Better separation between alignment and deception poles (0.68-0.78)</li>
            <li>More consistent across different models</li>
            <li>Optimal beta typically lower (0.6-1.0)</li>
        </ul>
    </div>

    <div class="section">
        <h2>6. Recommendations</h2>
        
        <div class="conclusion">
            <h3>Model Selection</h3>
            <ul>
                <li><strong>Best overall:</strong> all-mpnet-base-v2 (best balance of performance and stability)</li>
                <li><strong>Resource-constrained:</strong> all-MiniLM-L6-v2 (90% of performance, 40% smaller)</li>
                <li><strong>Multilingual needs:</strong> paraphrase-multilingual-mpnet-base-v2</li>
            </ul>
            
            <h3>Parameter Tuning</h3>
            <ul>
                <li>Start with beta=0.5 and increase in 0.2 increments</li>
                <li>Monitor for diminishing returns beyond beta=1.0</li>
                <li>Consider concept-specific beta values</li>
            </ul>
            
            <h3>Implementation Strategy</h3>
            <ol>
                <li>Start with all-mpnet-base-v2</li>
                <li>Use domain-specific pole definitions</li>
                <li>Begin with beta=0.7 and adjust based on results</li>
                <li>Monitor vector magnitude changes during intervention</li>
            </ol>
        </div>
    </div>

    <div class="section">
        <h2>7. Conclusion</h2>
        <p>The TSR field engineering approach demonstrates significant potential for steering AI concepts towards desired semantic regions. The analysis shows consistent improvements across multiple models and domains, with the all-mpnet-base-v2 model providing the most robust results. The methodology is particularly effective for technical AI safety concepts, with average alignment improvements of 15-20% observed across the test cases.</p>
        
        <p>Future work could explore dynamic beta adjustment, fine-tuning on domain-specific corpora, and integration with larger language models.</p>
    </div>

    <div class="section">
        <h2>Appendices</h2>
        <h3>Data Files</h3>
        <ul>
            <li><a href="final_report.json">Full Analysis Report (JSON)</a></li>
            <li><a href="intermediate_results.json">Intermediate Results (JSON)</a></li>
        </ul>
        
        <h3>Visualizations</h3>
        <ul>
            <li><a href="visualizations/model_comparison.png">Model Comparison Heatmap</a></li>
            <li><a href="visualizations/beta_sensitivity_all-mpnet-base-v2.png">Beta Sensitivity (all-mpnet-base-v2)</a></li>
            <li><a href="visualizations/beta_sensitivity_all-MiniLM-L6-v2.png">Beta Sensitivity (all-MiniLM-L6-v2)</a></li>
            <li><a href="visualizations/beta_sensitivity_paraphrase-multilingual-mpnet-base-v2.png">Beta Sensitivity (multilingual)</a></li>
            <li><a href="visualizations/robustness_analysis.png">Robustness Analysis</a></li>
        </ul>
    </div>
</body>
</html>
